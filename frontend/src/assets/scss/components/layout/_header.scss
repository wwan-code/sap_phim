@use '../../variables' as *;
@use '../../mixins' as *;

.header {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  padding: var(--w-spacing-md) var(--w-spacing-lg);
  background-color: transparent;
  color: var(--w-text-color-inverted);
  z-index: var(--w-zindex-sticky);
  transition: all 0.3s ease-in-out;
  @include flex(row, space-between, center);
  @include breakpoint(mobile) {
      padding: var(--w-spacing-sm) var(--w-spacing-lg);
    }

  &.header--fixed {
    position: fixed;
    background-color: rgba(var(--w-header-bg-rgb), 0.65);
    padding: var(--w-spacing-sm) var(--w-spacing-lg);
    box-shadow: var(--w-box-shadow);
    backdrop-filter: blur(0.625em);
    @include breakpoint(mobile) {
      padding: var(--w-spacing-xs) var(--w-spacing-lg);
    }
  }

  &__left,
  &__right {
    @include flex(row, flex-start, center);
    gap: var(--w-spacing-lg);

    @include breakpoint(mobile) {
      gap: var(--w-spacing-md);
    }
  }

  &__center {
    flex: 1 auto;


  }

  &__logo {
    @include flex(row, flex-start, center);
    gap: var(--w-spacing-xs);
    text-decoration: none;
    color: var(--w-text-color-inverted);
    font-size: var(--w-font-size-xl);
    font-weight: var(--w-font-weight-bold);

    img {
      height: 40px;
      width: auto;
    }

    @include breakpoint(mobile) {
      font-size: var(--w-font-size-lg);

      img {
        height: 25px;
      }
    }
  }

  &__search {
    @include flex(row, center, center);

    @include breakpoint(mobile) {
      display: none;
    }

  }

  &__nav {
    @include breakpoint(mobile) {
      display: none;
    }

    ul {
      @include flex(row, flex-start, center);
      list-style: none;
      padding: 0;
      margin: 0;
      gap: var(--w-spacing-lg);

      li {
        a {
          color: var(--w-text-color-inverted);
          text-decoration: none;
          font-weight: var(--w-font-weight-medium);
          transition: var(--w-transition-ease);

          &:hover {
            color: var(--w-primary-color);
          }

          &.active {
            color: var(--w-primary-color);
          }
        }
      }
    }
  }

  &__user-menu {
    position: relative;

    .header__user-menu-trigger {
      padding: 0;
      background: transparent;
      position: relative;
    }

    &-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--w-primary-color);
    }

    &-dropdown {
      position: absolute;
      top: calc(100% + var(--w-spacing-md));
      right: 0;
      background-color: var(--w-background-color-light);
      border-radius: var(--w-border-radius-lg);
      box-shadow: var(--w-box-shadow-lg);
      min-width: 180px;
      overflow: hidden;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s ease;
      z-index: var(--w-zindex-dropdown);

      &--open {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
      }

      ul {
        list-style: none;
        padding: 0;
        margin: 0;

        li {

          a,
          button {
            display: block;
            width: 100%;
            padding: var(--w-spacing-sm) var(--w-spacing-md);
            color: var(--w-text-color);
            text-decoration: none;
            background: none;
            border: none;
            text-align: left;
            cursor: pointer;
            transition: var(--w-transition-ease);

            &:hover {
              background-color: var(--w-background-color-light);
              color: var(--w-primary-color);
            }
          }
        }
      }
    }
  }

  &__hamburger-menu {
    display: block;
    background: none;
    border: none;
    color: var(--w-text-color-inverted);
    font-size: var(--w-font-size-xl);
    cursor: pointer;

    @include breakpoint(desktop) {
      display: none;
    }
  }

  &__btn {
    padding: var(--w-spacing-xs) var(--w-spacing-md);
    font-size: var(--w-font-size-md);
    border: 1px solid transparent;
    border-radius: var(--w-border-radius);
    cursor: pointer;
    transition: var(--w-transition-ease);

    &--primary {
      background-color: var(--w-primary-color);
      color: var(--w-text-color-inverted);

      &:hover {
        background-color: var(--w-primary-color-hover);
      }
    }

    @include breakpoint(mobile) {
      padding: var(--w-spacing-xs) var(--w-spacing-sm);
      font-size: var(--w-font-size-sm);
    }
  }

  &__notification {
    position: relative;
  }

  &__notification-btn {
    @include flex(row, center, center);
    position: relative;
    width: 40px;
    height: 40px;
    border-radius: var(--w-border-radius-lg);
    background-color: transparent;
    color: var(--w-text-color-inverted);
    transition: all 0.2s ease-in-out;
    cursor: pointer;

    &:hover {
      color: var(--w-primary-color);
    }

    &-wrapper {
      position: relative;
    }

    i {
      font-size: var(--w-font-size-xxl);
    }
  }

  &__notification-badge {
    position: absolute;
    top: 0;
    right: 0;
    transform: translate(40%, -40%);
    min-width: 20px;
    height: 20px;
    padding: 0 var(--w-spacing-xs);
    background-color: var(--w-danger-color);
    border: 2px solid var(--w-background-color);
    color: var(--w-white);
    font-size: 11px;
    font-weight: var(--w-font-weight-semibold);
    border-radius: 50px;
    @include flex(row, center, center);
  }
}
