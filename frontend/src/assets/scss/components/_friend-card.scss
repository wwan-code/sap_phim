@use '../variables' as *;
@use '../mixins' as *;

.friend-card {
  @include flex(column, space-between, stretch);
  background-color: var(--w-background-color-light);
  border-radius: var(--w-border-radius-md);
  padding: var(--w-spacing-md);
  transition: var(--w-transition-ease);
  box-shadow: var(--w-box-shadow);
  width: 100%;

  &:hover {
    transform: translateY(-4px);
    box-shadow: var(--w-box-shadow-lg);
  }

  &__header {
    @include flex(row, flex-start, center);
    gap: var(--w-spacing-md);
    margin-bottom: var(--w-spacing-md);
  }

  &__avatar-wrapper {
    position: relative;
    flex-shrink: 0;
  }

  &__avatar {
    width: 50px;
    height: 50px;
    border-radius: var(--w-border-radius-circle);
    object-fit: cover;
    border: 2px solid var(--w-border-color);
  }

  &__status {
    position: absolute;
    bottom: 2px;
    right: 2px;
    width: 12px;
    height: 12px;
    border-radius: var(--w-border-radius-circle);
    border: 2px solid var(--w-background-color);

    &--online {
      background-color: var(--w-online-color);
    }

    &--offline {
      background-color: var(--w-secondary-color);
    }
  }

  &__info {
    flex-grow: 1;
    min-width: 0; // Quan trọng để text-truncate hoạt động
  }

  &__username {
    font-size: var(--w-font-size-md);
    font-weight: var(--w-font-weight-semibold);
    color: var(--w-text-color);
    margin: 0;
    @include text-truncate(1);

    &--clickable {
      cursor: pointer;
      &:hover {
        color: var(--w-primary-color);
        text-decoration: underline;
      }
    }
  }

  &__status-text {
    font-size: var(--w-font-size-sm);
    color: var(--w-text-color-light);
    margin: var(--w-spacing-xs) 0 0;
  }

  &__actions {
    @include flex(row, flex-end, center);
    gap: var(--w-spacing-sm);
  }

  &__action-btn {
    @include flex(row, center, center);
    padding: var(--w-spacing-sm) var(--w-spacing-md);
    border: none;
    border-radius: var(--w-border-radius-sm);
    font-size: var(--w-font-size-sm);
    font-weight: var(--w-font-weight-medium);
    cursor: pointer;
    transition: var(--w-transition-ease);
    gap: var(--w-spacing-sm);

    &:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }

    &--add {
      background-color: var(--w-accent-color);
      color: var(--w-white);
      &:hover:not(:disabled) {
        background-color: rgba(var(--w-accent-color-rgb), .85);
      }
    }

    &--accept {
      background-color: var(--w-success-color);
      color: var(--w-white);
      &:hover:not(:disabled) {
        background-color: rgba(var(--w-success-color-rgb), .85);
      }
    }

    &--reject,
    &--remove {
      background-color: var(--w-danger-color);
      color: var(--w-white);
      &:hover:not(:disabled) {
        background-color: rgba(var(--w-danger-color-rgb), .85);
      }
    }
    
    &--chat {
      background-color: var(--w-info-color);
      color: var(--w-white);
      &:hover:not(:disabled) {
        background-color: rgba(var(--w-info-color-rgb), .85);
      }
    }

    &--pending {
      background-color: var(--w-secondary-color);
      color: var(--w-white);
      cursor: default;
    }
  }
}
